<td class="px-4 py-3 align-top font-mono text-slate-600">
  {{ report.report_id }}
</td>

<!-- Rapport + badges -->
<td class="px-4 py-3 align-top">
  <div class="font-medium">{{ report.title || '—' }}</div>
  <div class="mt-1 inline-flex items-center gap-2 text-xs">
    <span class="px-2 py-0.5 rounded-full border"
          [class.bg-yellow-50]="report.status === 'PENDING'"
          [class.border-yellow-300]="report.status === 'PENDING'">
      {{ ('admin.reports.status.' + report.status) | translate }}
    </span>

    <span class="px-2 py-0.5 rounded-full border"
          [class.bg-red-50]="report.severity === 'HIGH'"
          [class.border-red-300]="report.severity === 'HIGH'"
          [class.bg-orange-50]="report.severity === 'MEDIUM'"
          [class.border-orange-300]="report.severity === 'MEDIUM'"
          [class.bg-green-50]="report.severity === 'LOW'"
          [class.border-green-300]="report.severity === 'LOW'">
      {{ ('admin.reports.severity.' + report.severity) | translate }}
    </span>
  </div>
</td>

<td class="px-4 py-3 align-top">
  {{ report.researcher.username || '—' }}
</td>

<td class="px-4 py-3 align-top">
  {{ report.submitted_at | date:'short' }}
</td>

<td class="px-4 py-3 align-top min-w-44">
  <div class="flex items-center gap-2">
    <select [(ngModel)]="report.vulnerability_type_id" class="text-sm border rounded p-1 w-full"
            [attr.aria-label]="'admin.reports.vulnType' | translate">
      <option [ngValue]="null">—</option>
      <option *ngFor="let vuln of vulnerabilities" [value]="vuln.type_id">
        {{ vuln.name }}
      </option>
    </select>
    <button (click)="onSaveVuln()"
            [disabled]="report.vulnerability_type_id == null"
            class="border rounded px-2 py-1 text-xs">
      {{ 'common.save' | translate }}
    </button>
  </div>
</td>

<td class="px-4 py-3 align-top">
  <textarea [(ngModel)]="comment"
            [placeholder]="'admin.reports.commentPlaceholder' | translate"
            class="text-sm border rounded w-full p-2 min-h-10"></textarea>
</td>

<td class="px-4 py-3 align-top">
  <div class="flex flex-wrap gap-2">
    <button (click)="preview.emit(report.report_id)"
            class="bg-slate-600 hover:bg-slate-700 text-white px-3 py-1.5 rounded text-sm">
      {{ 'admin.reports.actions.preview' | translate }}
    </button>

    <button (click)="approve.emit({ id: report.report_id, comment })"
            [disabled]="report.status === 'APPROVED'"
            class="bg-green-600 hover:bg-green-700 disabled:opacity-50 text-white px-3 py-1.5 rounded text-sm">
      {{ 'admin.reports.actions.approve' | translate }}
    </button>

    <button (click)="reject.emit({ id: report.report_id, comment })"
            [disabled]="report.status === 'REJECTED'"
            class="bg-red-500 hover:bg-red-600 disabled:opacity-50 text-white px-3 py-1.5 rounded text-sm">
      {{ 'admin.reports.actions.reject' | translate }}
    </button>
  </div>
</td>
