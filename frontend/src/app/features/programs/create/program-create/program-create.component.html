<div class="auth-wrapper">
  <div class="auth-card w-full max-w-3xl">

    <header class="mb-4 flex items-center justify-between">
      <h2 class="text-2xl font-semibold">{{ 'programs.create.title' | translate }}</h2>
      <a routerLink="/programs" mat-stroked-button class="btn-ghost">
        <mat-icon class="mr-2">arrow_back</mat-icon>
        {{ 'programs.create.back' | translate }}
      </a>
    </header>

    <!-- BanniÃ¨res -->
    <div *ngIf="hasActive()" class="banner-warn mb-4">
      <div class="font-medium">
        {{ 'programs.create.hasActive.title' | translate }}
      </div>
      <div class="text-sm opacity-90">
        {{ 'programs.create.hasActive.desc' | translate }}
        <a *ngIf="myProgramId()" class="underline"
           [routerLink]="['/programs', myProgramId()]">
          {{ 'programs.create.hasActive.link' | translate }}
        </a>
      </div>
    </div>

    <div *ngIf="error()" class="banner-error mb-4">
      {{ error() }}
    </div>

    <!-- Form -->
    <form (ngSubmit)="publish()" class="space-y-5" *ngIf="!hasActive()">

      <!-- Titre -->
      <mat-form-field appearance="fill" class="w-full">
        <mat-label>{{ 'programs.create.fields.title' | translate }}</mat-label>
        <input matInput [(ngModel)]="title" name="title" required />
        <mat-hint>{{ 'programs.create.fields.titleHint' | translate }}</mat-hint>
      </mat-form-field>

      <!-- Description (TinyMCE) -->
      <div>
        <label class="block text-sm font-medium mb-2">
          {{ 'programs.create.fields.desc' | translate }}
        </label>
        <editor
          class="editor-surface"
          [apiKey]="apiKey"
          [(ngModel)]="descriptionHtml"
          name="descriptionHtml"
          [init]="tinyInit">
        </editor>
        <p class="text-xs text-gray-600 mt-1">
          {{ 'programs.create.fields.descHint' | translate }}
        </p>
      </div>

      <!-- Objectif -->
      <mat-form-field appearance="fill" class="w-full">
        <mat-label>{{ 'programs.create.fields.goal' | translate }}</mat-label>
        <textarea matInput rows="3" [(ngModel)]="goal" name="goal"></textarea>
        <mat-hint>{{ 'programs.create.fields.goalHint' | translate }}</mat-hint>
      </mat-form-field>

      <!-- Actions -->
      <div class="flex items-center justify-between pt-2">
        <div class="text-sm text-gray-600">
          {{ 'programs.create.pricing' | translate }}
        </div>

        <button mat-raised-button class="btn-primary"
                type="submit"
                [disabled]="loading() || !title.trim()">
          <mat-icon class="mr-2">payments</mat-icon>
          {{ 'programs.create.publish' | translate }}
        </button>
      </div>
    </form>

  </div>
</div>
